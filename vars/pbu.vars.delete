#!/usr/bin/env bash

parsed=$(pflags parse --name pbu.vars.delete ---- \
  -l var -t string -r -h 'Name of var' ---- "$@") || exit

eval set -- "$parsed"

vars=()

while [[ $# -gt 0 ]]; do
  case $1 in
    --help)
      printf '%s' "$2"
      exit 0
      ;;
    --var)
      vars+=("$2")
      shift 2
      ;;
    *)
      break
      ;;
  esac
done

for var in ${vars[@]}; do
  pbu.uninstall --name "${var}"
  _pbu.persistent_kv delete _pbu_vars "${var}"
done